<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="UTF-8">
<title>Bangla Pronouncer</title>
<link href="https://fonts.googleapis.com/css2?family=Merienda&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=SolaimanLipi&display=swap" rel="stylesheet">
<style>
/* ====== Reset & Fonts ====== */
*{margin:0;padding:0;box-sizing:border-box;}
body{font-family:'Merienda', cursive;background:#f0f4f8;display:flex;justify-content:center;align-items:center;min-height:100vh;transition:0.5s;}
body.dark{background:#121212;color:#f0f0f0;}
.container{background:rgba(255,255,255,0.3);backdrop-filter:blur(20px);border-radius:25px;padding:40px;max-width:600px;width:90%;box-shadow:0 10px 40px rgba(0,0,0,0.15);text-align:center;transition:0.5s;}
body.dark .container{background:rgba(30,30,30,0.4);box-shadow:0 10px 40px rgba(0,0,0,0.4);}
h1{font-family:'SolaimanLipi', sans-serif;color:#333;margin-bottom:25px;transition:0.5s;}
body.dark h1{color:#fff;}
textarea{width:100%;min-height:120px;padding:15px;border-radius:15px;border:none;font-size:18px;font-family:'Merienda', cursive;outline:none;resize:none;box-shadow:inset 0 0 15px rgba(0,0,0,0.05);transition:0.3s;}
body.dark textarea{background:#222;color:#fff;box-shadow:inset 0 0 15px rgba(255,255,255,0.05);}
button{margin-top:20px;padding:12px 30px;font-size:18px;border:none;border-radius:15px;background:linear-gradient(45deg,#ff5f7e,#ff8fa3);color:white;cursor:pointer;transition:0.3s;}
button:hover{transform:scale(1.05);}
.output{margin-top:25px;background:rgba(255,255,255,0.25);backdrop-filter:blur(15px);padding:20px;border-radius:20px;font-size:20px;min-height:80px;color:#222;position:relative;transition:0.5s;}
body.dark .output{background:rgba(50,50,50,0.3);color:#fff;}
.copy-btn{position:absolute;top:10px;right:10px;background:#ff5f7e;border:none;color:white;padding:5px 10px;border-radius:8px;font-size:14px;cursor:pointer;opacity:0.8;transition:0.3s;}
.copy-btn:hover{opacity:1;transform:scale(1.1);}
.loader{border:4px solid #f3f3f3;border-top:4px solid #ff5f7e;border-radius:50%;width:25px;height:25px;animation:spin 1s linear infinite;display:inline-block;margin-left:10px;vertical-align:middle;}
@keyframes spin{0%{transform:rotate(0deg);}100%{transform:rotate(360deg);}}
.toggle-mode{position:absolute;top:20px;right:20px;background:#ff5f7e;color:white;padding:8px 15px;border-radius:12px;cursor:pointer;transition:0.3s;}
.toggle-mode:hover{transform:scale(1.05);}
span.emoji{font-size:22px;margin-right:5px;}
</style>
</head>
<body>
<div class="toggle-mode" onclick="toggleMode()">üåô Dark Mode</div>
<div class="container">
<h1>‡¶á‡¶Ç‡¶∞‡ßá‡¶ú‡¶ø ‚Üí ‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ ‡¶â‡¶ö‡ßç‡¶ö‡¶æ‡¶∞‡¶£</h1>
<textarea id="eng" placeholder="‡¶Ø‡ßá‡¶ï‡ßã‡¶®‡ßã ‡¶á‡¶Ç‡¶∞‡ßá‡¶ú‡¶ø ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®‚Ä¶" oninput="livePreview()"></textarea>
<button onclick="convert()">Convert</button>
<div class="output" id="out">
‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶â‡¶ö‡ßç‡¶ö‡¶æ‡¶∞‡¶£ ‡¶¶‡ßá‡¶ñ‡¶æ‡¶¨‡ßá‚Ä¶
<button class="copy-btn" onclick="copyOutput()">Copy</button>
</div>
</div>

<script>
function toggleMode(){
    document.body.classList.toggle("dark");
    const btn = document.querySelector(".toggle-mode");
    btn.innerText = document.body.classList.contains("dark") ? "‚òÄ Light Mode" : "üåô Dark Mode";
}

async function convert(){
    const txt = document.getElementById("eng").value.trim();
    const out = document.getElementById("out");
    if(!txt){ out.innerHTML="‡¶ï‡¶ø‡¶õ‡ßÅ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®‚Ä¶<button class='copy-btn' onclick='copyOutput()'>Copy</button>"; return; }

    out.innerHTML="‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá <span class='loader'></span><button class='copy-btn' onclick='copyOutput()'>Copy</button>";

    try{
        const res = await fetch("/convert",{
            method:"POST",
            headers:{"Content-Type":"application/json"},
            body:JSON.stringify({ text: txt })
        });
        const data = await res.json();
        const emojis = ["üÖ∞Ô∏è","üÖ±Ô∏è","üåü","üî•","üí´"];
        const highlighted = data.output.split(" ").map(w=>emojis[Math.floor(Math.random()*emojis.length)]+" "+w).join(" ");
        out.innerHTML=highlighted + "<button class='copy-btn' onclick='copyOutput()'>Copy</button>";
    } catch(err){
        console.error(err);
        out.innerHTML="Server Error!<button class='copy-btn' onclick='copyOutput()'>Copy</button>";
    }
}

function copyOutput(){
    const text = document.getElementById("out").innerText.replace("Copy","");
    navigator.clipboard.writeText(text).then(()=>alert("Copy successful!"));
}

// Real-time preview
function livePreview(){
    const txt = document.getElementById("eng").value.trim();
    const out = document.getElementById("out");
    if(txt) out.innerHTML="üìù "+txt+"<button class='copy-btn' onclick='copyOutput()'>Copy</button>";
    else out.innerHTML="‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶â‡¶ö‡ßç‡¶ö‡¶æ‡¶∞‡¶£ ‡¶¶‡ßá‡¶ñ‡¶æ‡¶¨‡ßá‚Ä¶<button class='copy-btn' onclick='copyOutput()'>Copy</button>";
}
</script>
</body>
</html>
